{"ast":null,"code":"var _jsxFileName = \"C:\\\\laragon\\\\www\\\\Tunegie\\\\frontend\\\\src\\\\components\\\\Profile\\\\Profile.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { useTheme } from '../../contexts/ThemeContext';\nimport ThemeSelector from './ThemeSelector';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Profile = () => {\n  _s();\n  var _streaks$login, _streaks$login2, _streaks$login3, _streaks$play, _streaks$play2, _streaks$play3;\n  const {\n    user,\n    token,\n    updateUser,\n    API_BASE\n  } = useAuth();\n  const {\n    theme\n  } = useTheme();\n  const [profile, setProfile] = useState({\n    username: '',\n    email: '',\n    profile_picture: '',\n    created_at: ''\n  });\n  const [formData, setFormData] = useState({\n    username: ''\n  });\n  const [errors, setErrors] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [uploadLoading, setUploadLoading] = useState(false);\n  const [message, setMessage] = useState('');\n  const [usernameHistory, setUsernameHistory] = useState([]);\n  const [showUsernameHistory, setShowUsernameHistory] = useState(false);\n  const [historyLoading, setHistoryLoading] = useState(false);\n  const [streaks, setStreaks] = useState({\n    login: {},\n    play: {}\n  });\n  const [achievements, setAchievements] = useState({\n    earned_count: 0,\n    total_available: 0,\n    total_points: 0,\n    completion_percentage: 0,\n    recent: []\n  });\n  const [streakLoading, setStreakLoading] = useState(false);\n  useEffect(() => {\n    if (user) {\n      fetchProfile();\n      fetchProfileData();\n    }\n  }, [user, token]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const fetchProfile = async () => {\n    try {\n      const response = await fetch(`${API_BASE}/backend/php/api/user/profile.php`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      const data = await response.json();\n      if (response.ok && !data.error) {\n        setProfile(data.user);\n        setFormData({\n          username: data.user.username\n        });\n      } else {\n        setErrors({\n          fetch: data.error\n        });\n      }\n    } catch (error) {\n      setErrors({\n        fetch: 'Failed to load profile data'\n      });\n    }\n  };\n  const fetchProfileData = async () => {\n    setStreakLoading(true);\n    try {\n      const response = await fetch(`${API_BASE}/backend/php/api/user/my-profile.php`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      const data = await response.json();\n      if (response.ok && !data.error) {\n        setStreaks(data.streaks || {\n          login: {},\n          play: {}\n        });\n        setAchievements(data.achievements || {\n          earned_count: 0,\n          total_available: 0,\n          total_points: 0,\n          completion_percentage: 0,\n          recent: []\n        });\n      } else {\n        console.error('Failed to fetch profile data:', data.error || 'Unknown error');\n      }\n    } catch (error) {\n      console.error('Failed to fetch profile data:', error);\n    } finally {\n      setStreakLoading(false);\n    }\n  };\n  const getAchievementColor = color => {\n    const colors = {\n      'bronze': 'from-amber-700 to-amber-800',\n      'silver': 'from-gray-300 to-gray-500',\n      'gold': 'from-yellow-400 to-yellow-600',\n      'purple': 'from-purple-500 to-purple-700',\n      'blue': 'from-blue-500 to-blue-700',\n      'green': 'from-green-500 to-green-700',\n      'red': 'from-red-500 to-red-700'\n    };\n    return colors[color] || colors['bronze'];\n  };\n  const formatDate = dateString => {\n    if (!dateString) return 'Never';\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffTime = Math.abs(now - date);\n    const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\n    if (diffDays === 0) return 'Today';\n    if (diffDays === 1) return 'Yesterday';\n    if (diffDays < 7) return `${diffDays} days ago`;\n    return date.toLocaleDateString();\n  };\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n\n    // Clear error when user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  };\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.username.trim()) {\n      newErrors.username = 'Username is required';\n    } else if (formData.username.length < 8 || formData.username.length > 16) {\n      newErrors.username = 'Username must be 8-16 characters long';\n    } else if (!/^[a-zA-Z]+$/.test(formData.username)) {\n      newErrors.username = 'Username must contain only Latin letters';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const fetchUsernameHistory = async () => {\n    setHistoryLoading(true);\n    try {\n      const response = await fetch(`${API_BASE}/backend/php/api/user/username-history.php`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      const data = await response.json();\n      if (response.ok && !data.error) {\n        setUsernameHistory(data.history || []);\n      } else {\n        console.error('Failed to fetch username history:', data.error);\n      }\n    } catch (error) {\n      console.error('Failed to fetch username history:', error);\n    } finally {\n      setHistoryLoading(false);\n    }\n  };\n  const handleUpdateProfile = async e => {\n    e.preventDefault();\n    if (!validateForm()) {\n      return;\n    }\n    setLoading(true);\n    setMessage('');\n    try {\n      const response = await fetch(`${API_BASE}/backend/php/api/user/profile.php`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(formData)\n      });\n      const data = await response.json();\n      if (response.ok && !data.error) {\n        setProfile(data.user);\n        // Update the user in AuthContext\n        updateUser({\n          username: data.user.username\n        });\n        setMessage('Profile updated successfully!');\n        setErrors({});\n        // Refresh username history if it was being displayed\n        if (showUsernameHistory) {\n          fetchUsernameHistory();\n        }\n      } else {\n        setErrors({\n          submit: data.error\n        });\n      }\n    } catch (error) {\n      setErrors({\n        submit: 'An error occurred while updating profile'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleFileUpload = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    // Validate file type\n    const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png'];\n    if (!allowedTypes.includes(file.type)) {\n      setErrors({\n        upload: 'File format or size is not correct!'\n      });\n      return;\n    }\n\n    // Validate file size (6MB max)\n    if (file.size > 6 * 1024 * 1024) {\n      setErrors({\n        upload: 'File format or size is not correct!'\n      });\n      return;\n    }\n    setUploadLoading(true);\n    setErrors({\n      upload: ''\n    });\n    const formDataFile = new FormData();\n    formDataFile.append('profile_picture', file);\n    try {\n      const response = await fetch('http://localhost:8000/api/upload_profile_picture.php', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n          // Don't set Content-Type for FormData - browser will set it automatically with boundary\n        },\n        body: formDataFile\n      });\n      const data = await response.json();\n      if (response.ok && !data.error) {\n        setProfile(prev => ({\n          ...prev,\n          profile_picture: data.profile_picture\n        }));\n        // Update the user in AuthContext\n        updateUser({\n          profile_picture: data.profile_picture\n        });\n        setMessage('Profile successfully saved!');\n      } else {\n        setErrors({\n          upload: data.error\n        });\n      }\n    } catch (error) {\n      setErrors({\n        upload: 'Failed to upload profile picture'\n      });\n    } finally {\n      setUploadLoading(false);\n    }\n  };\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `min-h-screen bg-gradient-to-br ${theme.background} flex items-center justify-center p-4 transition-all duration-500`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center text-white animate-fade-in\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xl\",\n          children: \"Please log in to view your profile.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `min-h-screen bg-gradient-to-br ${theme.background} p-4 transition-all duration-500`,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-4xl mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: `text-3xl font-bold text-${theme.text} text-center mb-8 animate-fade-in`,\n        children: \"Your Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `bg-${theme.primary}/20 border border-${theme.primary}/50 rounded p-3 mb-6 animate-slide-in`,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: `text-${theme.text} text-sm`,\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `bg-${theme.surface} rounded-lg p-6 border border-${theme.surfaceBorder} mb-6 transition-all duration-300 hover:${theme.glow}/20`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col md:flex-row items-center md:items-start space-y-4 md:space-y-0 md:space-x-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative group\",\n              children: [profile.profile_picture ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: `http://localhost:8000/${profile.profile_picture}`,\n                alt: \"Profile\",\n                className: `w-24 h-24 rounded-full object-cover border-2 border-${theme.primary} transition-all duration-300 group-hover:scale-110 group-hover:${theme.glow}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `w-24 h-24 rounded-full bg-gray-700 border-2 border-${theme.primary} flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:${theme.glow}`,\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: `w-12 h-12 text-${theme.textMuted}`,\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 296,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 295,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 19\n              }, this), uploadLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `w-6 h-6 border-2 border-${theme.primary} border-t-transparent rounded-full animate-spin`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: `mt-2 cursor-pointer bg-${theme.primary} hover:bg-${theme.primaryHover} text-white px-3 py-1 rounded text-sm transition-all duration-200 hover:scale-105 hover:${theme.glow}`,\n              children: [\"Change Photo\", /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"image/png,image/jpeg,image/jpg\",\n                onChange: handleFileUpload,\n                className: \"hidden\",\n                disabled: uploadLoading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 15\n            }, this), errors.upload && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-400 text-xs mt-1 text-center\",\n              children: errors.upload\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 text-center md:text-left\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: `text-xl font-semibold text-${theme.text} animate-slide-in`,\n              children: profile.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: `text-${theme.textSecondary} animate-slide-in`,\n              children: profile.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: `text-${theme.textMuted} text-sm animate-slide-in`,\n              children: [\"Member since: \", profile.created_at ? new Date(profile.created_at).toLocaleDateString() : 'N/A']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `bg-${theme.surface} rounded-lg p-6 border border-${theme.surfaceBorder} mb-6 transition-all duration-300 hover:${theme.glow}/20`,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: `text-xl font-semibold text-${theme.text} mb-4 flex items-center`,\n          children: [\"\\uD83D\\uDD25 Your Streaks\", streakLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `ml-2 w-4 h-4 border-2 border-${theme.primary} border-t-transparent rounded-full animate-spin`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `bg-gradient-to-br from-red-500/20 to-orange-500/20 border border-red-500/30 rounded-lg p-4 text-center transition-all duration-300 hover:scale-105`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl mb-2\",\n              children: \"\\uD83D\\uDCC5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-${theme.text} font-bold mb-1`,\n              children: \"Login Streak\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-2xl font-bold text-${theme.text} mb-1`,\n              children: ((_streaks$login = streaks.login) === null || _streaks$login === void 0 ? void 0 : _streaks$login.current_streak) || 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-${theme.textMuted} text-sm`,\n              children: [\"Best: \", ((_streaks$login2 = streaks.login) === null || _streaks$login2 === void 0 ? void 0 : _streaks$login2.longest_streak) || 0, \" days\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-${theme.textMuted} text-xs mt-1`,\n              children: [\"Last: \", formatDate((_streaks$login3 = streaks.login) === null || _streaks$login3 === void 0 ? void 0 : _streaks$login3.last_activity_date)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `bg-gradient-to-br from-blue-500/20 to-purple-500/20 border border-blue-500/30 rounded-lg p-4 text-center transition-all duration-300 hover:scale-105`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl mb-2\",\n              children: \"\\uD83C\\uDFAE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-${theme.text} font-bold mb-1`,\n              children: \"Play Streak\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-2xl font-bold text-${theme.text} mb-1`,\n              children: ((_streaks$play = streaks.play) === null || _streaks$play === void 0 ? void 0 : _streaks$play.current_streak) || 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-${theme.textMuted} text-sm`,\n              children: [\"Best: \", ((_streaks$play2 = streaks.play) === null || _streaks$play2 === void 0 ? void 0 : _streaks$play2.longest_streak) || 0, \" days\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-${theme.textMuted} text-xs mt-1`,\n              children: [\"Last: \", formatDate((_streaks$play3 = streaks.play) === null || _streaks$play3 === void 0 ? void 0 : _streaks$play3.last_activity_date)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 15\n            }, this), streaks.play && !streaks.play.played_today && streaks.play.current_streak > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-orange-400 text-xs mt-1 animate-pulse\",\n              children: \"\\u26A0\\uFE0F Play today to keep streak!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 17\n            }, this), streaks.play && streaks.play.played_today && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-green-400 text-xs mt-1\",\n              children: \"\\u2705 Streak maintained today!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `bg-${theme.surface} rounded-lg p-6 border border-${theme.surfaceBorder} mb-6 transition-all duration-300 hover:${theme.glow}/20`,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: `text-xl font-semibold text-${theme.text} mb-4 flex items-center`,\n          children: \"\\uD83C\\uDFC6 Achievements\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `bg-gradient-to-r from-${theme.primary}/10 to-${theme.primaryHover}/10 border border-${theme.primary}/20 rounded-lg p-4 mb-4`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `text-${theme.text} font-bold text-lg`,\n                children: [achievements.earned_count, \"/\", achievements.total_available, \" Unlocked\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `text-${theme.textMuted} text-sm`,\n                children: [achievements.completion_percentage, \"% Complete\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-right`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `text-yellow-400 font-bold text-xl`,\n                children: [achievements.total_points, \" pts\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `text-${theme.textMuted} text-xs`,\n                children: \"Total Points\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `mt-3 bg-gray-700 rounded-full h-2`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `bg-gradient-to-r from-${theme.primary} to-${theme.primaryHover} h-2 rounded-full transition-all duration-500`,\n              style: {\n                width: `${achievements.completion_percentage}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 11\n        }, this), achievements.recent && achievements.recent.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: `text-${theme.textSecondary} font-medium mb-3`,\n            children: \"Recent Achievements:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3\",\n            children: achievements.recent.map((achievement, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `bg-gradient-to-br ${getAchievementColor(achievement.color)} p-3 rounded-lg border border-white/20 text-center transition-all duration-300 hover:scale-105 hover:shadow-lg`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-2xl mb-1\",\n                children: achievement.icon || '🏆'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-white font-bold text-sm mb-1\",\n                children: achievement.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 435,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-white/80 text-xs mb-2\",\n                children: achievement.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-yellow-300 font-bold text-xs\",\n                children: [\"+\", achievement.points, \" pts\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-white/60 text-xs mt-1\",\n                children: formatDate(achievement.earned_at)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 13\n        }, this), achievements.recent && achievements.recent.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `text-center py-8 text-${theme.textMuted}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-4xl mb-2\",\n            children: \"\\uD83C\\uDFAF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No achievements yet!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm mt-1\",\n            children: \"Start playing to unlock your first achievement.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: /*#__PURE__*/_jsxDEV(ThemeSelector, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `bg-${theme.surface} rounded-lg p-6 border border-${theme.surfaceBorder} transition-all duration-300`,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: `text-xl font-semibold text-${theme.text} mb-4`,\n          children: \"Edit Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleUpdateProfile,\n          className: \"space-y-4\",\n          children: [errors.submit && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-red-600/20 border border-red-500/50 rounded p-3 animate-slide-in\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-300 text-sm\",\n              children: errors.submit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center mb-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"username\",\n                className: `block text-${theme.textSecondary} text-sm font-medium`,\n                children: \"Username\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => {\n                  if (!showUsernameHistory) {\n                    fetchUsernameHistory();\n                  }\n                  setShowUsernameHistory(!showUsernameHistory);\n                },\n                className: `text-${theme.primary} hover:text-${theme.primaryHover} text-xs underline transition-colors duration-200`,\n                children: showUsernameHistory ? 'Hide History' : 'View History'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 483,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              id: \"username\",\n              name: \"username\",\n              value: formData.username,\n              onChange: handleInputChange,\n              className: `w-full px-3 py-2 bg-gray-800 border rounded-md text-white focus:outline-none focus:ring-2 transition-all duration-200 ${errors.username ? 'border-red-500 focus:ring-red-500' : `border-gray-600 focus:ring-${theme.ring} focus:border-${theme.primary}`}`,\n              placeholder: \"Your username\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 15\n            }, this), errors.username && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-400 text-xs mt-1 animate-slide-in\",\n              children: errors.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 510,\n              columnNumber: 17\n            }, this), showUsernameHistory && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `mt-3 p-3 bg-${theme.surfaceBorder}/10 border border-${theme.surfaceBorder} rounded-md`,\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: `text-${theme.textSecondary} text-sm font-medium mb-2`,\n                children: \"Username History\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 515,\n                columnNumber: 19\n              }, this), historyLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-center py-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `w-4 h-4 border-2 border-${theme.primary} border-t-transparent rounded-full animate-spin mr-2`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 518,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `text-${theme.textMuted} text-xs`,\n                  children: \"Loading...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 519,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 517,\n                columnNumber: 21\n              }, this) : usernameHistory.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2 max-h-32 overflow-y-auto\",\n                children: usernameHistory.map((entry, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `text-xs text-${theme.textMuted} flex justify-between items-center py-1`,\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-mono\",\n                      children: entry.old_username\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 526,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"mx-2\",\n                      children: \"\\u2192\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 527,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-mono\",\n                      children: entry.new_username\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 528,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 525,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs opacity-75\",\n                    children: new Date(entry.changed_at).toLocaleDateString()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 530,\n                    columnNumber: 27\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 524,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 522,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                className: `text-${theme.textMuted} text-xs`,\n                children: \"No username changes found.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 537,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading,\n            className: `w-full py-2 px-4 rounded-md font-medium transition-all duration-200 hover:scale-105 ${loading ? 'bg-gray-600 text-gray-300 cursor-not-allowed' : `bg-${theme.primary} hover:bg-${theme.primaryHover} text-white hover:${theme.glow}`}`,\n            children: loading ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"flex items-center justify-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 554,\n                columnNumber: 19\n              }, this), \"Updating...\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 17\n            }, this) : 'Update Profile'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 543,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 272,\n    columnNumber: 5\n  }, this);\n};\n_s(Profile, \"noWg3zoGP4Q86YVld6t+e60l4UA=\", false, function () {\n  return [useAuth, useTheme];\n});\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","useTheme","ThemeSelector","jsxDEV","_jsxDEV","Profile","_s","_streaks$login","_streaks$login2","_streaks$login3","_streaks$play","_streaks$play2","_streaks$play3","user","token","updateUser","API_BASE","theme","profile","setProfile","username","email","profile_picture","created_at","formData","setFormData","errors","setErrors","loading","setLoading","uploadLoading","setUploadLoading","message","setMessage","usernameHistory","setUsernameHistory","showUsernameHistory","setShowUsernameHistory","historyLoading","setHistoryLoading","streaks","setStreaks","login","play","achievements","setAchievements","earned_count","total_available","total_points","completion_percentage","recent","streakLoading","setStreakLoading","fetchProfile","fetchProfileData","response","fetch","headers","data","json","ok","error","console","getAchievementColor","color","colors","formatDate","dateString","date","Date","now","diffTime","Math","abs","diffDays","floor","toLocaleDateString","handleInputChange","e","name","value","target","prev","validateForm","newErrors","trim","length","test","Object","keys","fetchUsernameHistory","history","handleUpdateProfile","preventDefault","method","body","JSON","stringify","submit","handleFileUpload","file","files","allowedTypes","includes","type","upload","size","formDataFile","FormData","append","className","background","children","fileName","_jsxFileName","lineNumber","columnNumber","text","primary","surface","surfaceBorder","glow","src","alt","textMuted","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","primaryHover","accept","onChange","disabled","textSecondary","current_streak","longest_streak","last_activity_date","played_today","style","width","map","achievement","index","icon","description","points","earned_at","onSubmit","htmlFor","onClick","id","ring","placeholder","entry","old_username","new_username","changed_at","_c","$RefreshReg$"],"sources":["C:/laragon/www/Tunegie/frontend/src/components/Profile/Profile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useTheme } from '../../contexts/ThemeContext';\r\nimport ThemeSelector from './ThemeSelector';\r\n\r\nconst Profile = () => {\r\n  const { user, token, updateUser, API_BASE } = useAuth();\r\n  const { theme } = useTheme();\r\n  const [profile, setProfile] = useState({\r\n    username: '',\r\n    email: '',\r\n    profile_picture: '',\r\n    created_at: ''\r\n  });\r\n  const [formData, setFormData] = useState({\r\n    username: ''\r\n  });\r\n  const [errors, setErrors] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [uploadLoading, setUploadLoading] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n  const [usernameHistory, setUsernameHistory] = useState([]);\r\n  const [showUsernameHistory, setShowUsernameHistory] = useState(false);\r\n  const [historyLoading, setHistoryLoading] = useState(false);\r\n  const [streaks, setStreaks] = useState({ login: {}, play: {} });\r\n  const [achievements, setAchievements] = useState({ earned_count: 0, total_available: 0, total_points: 0, completion_percentage: 0, recent: [] });\r\n  const [streakLoading, setStreakLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      fetchProfile();\r\n      fetchProfileData();\r\n    }\r\n  }, [user, token]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const fetchProfile = async () => {\r\n    try {\r\n      const response = await fetch(`${API_BASE}/backend/php/api/user/profile.php`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      if (response.ok && !data.error) {\r\n        setProfile(data.user);\r\n        setFormData({\r\n          username: data.user.username\r\n        });\r\n      } else {\r\n        setErrors({ fetch: data.error });\r\n      }\r\n    } catch (error) {\r\n      setErrors({ fetch: 'Failed to load profile data' });\r\n    }\r\n  };\r\n\r\n  const fetchProfileData = async () => {\r\n    setStreakLoading(true);\r\n    try {\r\n      const response = await fetch(`${API_BASE}/backend/php/api/user/my-profile.php`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      if (response.ok && !data.error) {\r\n        setStreaks(data.streaks || { login: {}, play: {} });\r\n        setAchievements(data.achievements || { earned_count: 0, total_available: 0, total_points: 0, completion_percentage: 0, recent: [] });\r\n      } else {\r\n        console.error('Failed to fetch profile data:', data.error || 'Unknown error');\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to fetch profile data:', error);\r\n    } finally {\r\n      setStreakLoading(false);\r\n    }\r\n  };\r\n\r\n  const getAchievementColor = (color) => {\r\n    const colors = {\r\n      'bronze': 'from-amber-700 to-amber-800',\r\n      'silver': 'from-gray-300 to-gray-500', \r\n      'gold': 'from-yellow-400 to-yellow-600',\r\n      'purple': 'from-purple-500 to-purple-700',\r\n      'blue': 'from-blue-500 to-blue-700',\r\n      'green': 'from-green-500 to-green-700',\r\n      'red': 'from-red-500 to-red-700'\r\n    };\r\n    return colors[color] || colors['bronze'];\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return 'Never';\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diffTime = Math.abs(now - date);\r\n    const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\r\n    \r\n    if (diffDays === 0) return 'Today';\r\n    if (diffDays === 1) return 'Yesterday';\r\n    if (diffDays < 7) return `${diffDays} days ago`;\r\n    return date.toLocaleDateString();\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n    \r\n    // Clear error when user starts typing\r\n    if (errors[name]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [name]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n    if (!formData.username.trim()) {\r\n      newErrors.username = 'Username is required';\r\n    } else if (formData.username.length < 8 || formData.username.length > 16) {\r\n      newErrors.username = 'Username must be 8-16 characters long';\r\n    } else if (!/^[a-zA-Z]+$/.test(formData.username)) {\r\n      newErrors.username = 'Username must contain only Latin letters';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const fetchUsernameHistory = async () => {\r\n    setHistoryLoading(true);\r\n    try {\r\n      const response = await fetch(`${API_BASE}/backend/php/api/user/username-history.php`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      if (response.ok && !data.error) {\r\n        setUsernameHistory(data.history || []);\r\n      } else {\r\n        console.error('Failed to fetch username history:', data.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to fetch username history:', error);\r\n    } finally {\r\n      setHistoryLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleUpdateProfile = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setMessage('');\r\n\r\n    try {\r\n      const response = await fetch(`${API_BASE}/backend/php/api/user/profile.php`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(formData)\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      if (response.ok && !data.error) {\r\n        setProfile(data.user);\r\n        // Update the user in AuthContext\r\n        updateUser({ username: data.user.username });\r\n        setMessage('Profile updated successfully!');\r\n        setErrors({});\r\n        // Refresh username history if it was being displayed\r\n        if (showUsernameHistory) {\r\n          fetchUsernameHistory();\r\n        }\r\n      } else {\r\n        setErrors({ submit: data.error });\r\n      }\r\n    } catch (error) {\r\n      setErrors({ submit: 'An error occurred while updating profile' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    // Validate file type\r\n    const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png'];\r\n    if (!allowedTypes.includes(file.type)) {\r\n      setErrors({ upload: 'File format or size is not correct!' });\r\n      return;\r\n    }\r\n\r\n    // Validate file size (6MB max)\r\n    if (file.size > 6 * 1024 * 1024) {\r\n      setErrors({ upload: 'File format or size is not correct!' });\r\n      return;\r\n    }\r\n\r\n    setUploadLoading(true);\r\n    setErrors({ upload: '' });\r\n\r\n    const formDataFile = new FormData();\r\n    formDataFile.append('profile_picture', file);\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:8000/api/upload_profile_picture.php', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n          // Don't set Content-Type for FormData - browser will set it automatically with boundary\r\n        },\r\n        body: formDataFile\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      if (response.ok && !data.error) {\r\n        setProfile(prev => ({\r\n          ...prev,\r\n          profile_picture: data.profile_picture\r\n        }));\r\n        // Update the user in AuthContext\r\n        updateUser({ profile_picture: data.profile_picture });\r\n        setMessage('Profile successfully saved!');\r\n      } else {\r\n        setErrors({ upload: data.error });\r\n      }\r\n    } catch (error) {\r\n      setErrors({ upload: 'Failed to upload profile picture' });\r\n    } finally {\r\n      setUploadLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className={`min-h-screen bg-gradient-to-br ${theme.background} flex items-center justify-center p-4 transition-all duration-500`}>\r\n        <div className=\"text-center text-white animate-fade-in\">\r\n          <p className=\"text-xl\">Please log in to view your profile.</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`min-h-screen bg-gradient-to-br ${theme.background} p-4 transition-all duration-500`}>\r\n      <div className=\"max-w-4xl mx-auto\">\r\n        <h1 className={`text-3xl font-bold text-${theme.text} text-center mb-8 animate-fade-in`}>Your Profile</h1>\r\n        \r\n        {message && (\r\n          <div className={`bg-${theme.primary}/20 border border-${theme.primary}/50 rounded p-3 mb-6 animate-slide-in`}>\r\n            <p className={`text-${theme.text} text-sm`}>{message}</p>\r\n          </div>\r\n        )}\r\n\r\n        <div className={`bg-${theme.surface} rounded-lg p-6 border border-${theme.surfaceBorder} mb-6 transition-all duration-300 hover:${theme.glow}/20`}>\r\n          <div className=\"flex flex-col md:flex-row items-center md:items-start space-y-4 md:space-y-0 md:space-x-6\">\r\n            {/* Profile Picture Section */}\r\n            <div className=\"flex flex-col items-center\">\r\n              <div className=\"relative group\">\r\n                {profile.profile_picture ? (\r\n                  <img\r\n                    src={`http://localhost:8000/${profile.profile_picture}`}\r\n                    alt=\"Profile\"\r\n                    className={`w-24 h-24 rounded-full object-cover border-2 border-${theme.primary} transition-all duration-300 group-hover:scale-110 group-hover:${theme.glow}`}\r\n                  />\r\n                ) : (\r\n                  <div className={`w-24 h-24 rounded-full bg-gray-700 border-2 border-${theme.primary} flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:${theme.glow}`}>\r\n                    <svg className={`w-12 h-12 text-${theme.textMuted}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\r\n                    </svg>\r\n                  </div>\r\n                )}\r\n                {uploadLoading && (\r\n                  <div className=\"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center\">\r\n                    <div className={`w-6 h-6 border-2 border-${theme.primary} border-t-transparent rounded-full animate-spin`}></div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              \r\n              <label className={`mt-2 cursor-pointer bg-${theme.primary} hover:bg-${theme.primaryHover} text-white px-3 py-1 rounded text-sm transition-all duration-200 hover:scale-105 hover:${theme.glow}`}>\r\n                Change Photo\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\"image/png,image/jpeg,image/jpg\"\r\n                  onChange={handleFileUpload}\r\n                  className=\"hidden\"\r\n                  disabled={uploadLoading}\r\n                />\r\n              </label>\r\n              \r\n              {errors.upload && (\r\n                <p className=\"text-red-400 text-xs mt-1 text-center\">{errors.upload}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Profile Info */}\r\n            <div className=\"flex-1 text-center md:text-left\">\r\n              <h2 className={`text-xl font-semibold text-${theme.text} animate-slide-in`}>{profile.username}</h2>\r\n              <p className={`text-${theme.textSecondary} animate-slide-in`}>{profile.email}</p>\r\n              <p className={`text-${theme.textMuted} text-sm animate-slide-in`}>\r\n                Member since: {profile.created_at ? new Date(profile.created_at).toLocaleDateString() : 'N/A'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Streaks Section */}\r\n        <div className={`bg-${theme.surface} rounded-lg p-6 border border-${theme.surfaceBorder} mb-6 transition-all duration-300 hover:${theme.glow}/20`}>\r\n          <h3 className={`text-xl font-semibold text-${theme.text} mb-4 flex items-center`}>\r\n            🔥 Your Streaks\r\n            {streakLoading && (\r\n              <div className={`ml-2 w-4 h-4 border-2 border-${theme.primary} border-t-transparent rounded-full animate-spin`}></div>\r\n            )}\r\n          </h3>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {/* Login Streak */}\r\n            <div className={`bg-gradient-to-br from-red-500/20 to-orange-500/20 border border-red-500/30 rounded-lg p-4 text-center transition-all duration-300 hover:scale-105`}>\r\n              <div className=\"text-2xl mb-2\">📅</div>\r\n              <div className={`text-${theme.text} font-bold mb-1`}>Login Streak</div>\r\n              <div className={`text-2xl font-bold text-${theme.text} mb-1`}>\r\n                {streaks.login?.current_streak || 0}\r\n              </div>\r\n              <div className={`text-${theme.textMuted} text-sm`}>\r\n                Best: {streaks.login?.longest_streak || 0} days\r\n              </div>\r\n              <div className={`text-${theme.textMuted} text-xs mt-1`}>\r\n                Last: {formatDate(streaks.login?.last_activity_date)}\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Play Streak */}\r\n            <div className={`bg-gradient-to-br from-blue-500/20 to-purple-500/20 border border-blue-500/30 rounded-lg p-4 text-center transition-all duration-300 hover:scale-105`}>\r\n              <div className=\"text-2xl mb-2\">🎮</div>\r\n              <div className={`text-${theme.text} font-bold mb-1`}>Play Streak</div>\r\n              <div className={`text-2xl font-bold text-${theme.text} mb-1`}>\r\n                {streaks.play?.current_streak || 0}\r\n              </div>\r\n              <div className={`text-${theme.textMuted} text-sm`}>\r\n                Best: {streaks.play?.longest_streak || 0} days\r\n              </div>\r\n              <div className={`text-${theme.textMuted} text-xs mt-1`}>\r\n                Last: {formatDate(streaks.play?.last_activity_date)}\r\n              </div>\r\n              {streaks.play && !streaks.play.played_today && streaks.play.current_streak > 0 && (\r\n                <div className=\"text-orange-400 text-xs mt-1 animate-pulse\">\r\n                  ⚠️ Play today to keep streak!\r\n                </div>\r\n              )}\r\n              {streaks.play && streaks.play.played_today && (\r\n                <div className=\"text-green-400 text-xs mt-1\">\r\n                  ✅ Streak maintained today!\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Achievements Section */}\r\n        <div className={`bg-${theme.surface} rounded-lg p-6 border border-${theme.surfaceBorder} mb-6 transition-all duration-300 hover:${theme.glow}/20`}>\r\n          <h3 className={`text-xl font-semibold text-${theme.text} mb-4 flex items-center`}>\r\n            🏆 Achievements\r\n          </h3>\r\n          \r\n          {/* Achievement Summary */}\r\n          <div className={`bg-gradient-to-r from-${theme.primary}/10 to-${theme.primaryHover}/10 border border-${theme.primary}/20 rounded-lg p-4 mb-4`}>\r\n            <div className=\"flex justify-between items-center\">\r\n              <div>\r\n                <div className={`text-${theme.text} font-bold text-lg`}>\r\n                  {achievements.earned_count}/{achievements.total_available} Unlocked\r\n                </div>\r\n                <div className={`text-${theme.textMuted} text-sm`}>\r\n                  {achievements.completion_percentage}% Complete\r\n                </div>\r\n              </div>\r\n              <div className={`text-right`}>\r\n                <div className={`text-yellow-400 font-bold text-xl`}>\r\n                  {achievements.total_points} pts\r\n                </div>\r\n                <div className={`text-${theme.textMuted} text-xs`}>\r\n                  Total Points\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Progress Bar */}\r\n            <div className={`mt-3 bg-gray-700 rounded-full h-2`}>\r\n              <div \r\n                className={`bg-gradient-to-r from-${theme.primary} to-${theme.primaryHover} h-2 rounded-full transition-all duration-500`}\r\n                style={{ width: `${achievements.completion_percentage}%` }}\r\n              ></div>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Recent Achievements */}\r\n          {achievements.recent && achievements.recent.length > 0 && (\r\n            <div>\r\n              <h4 className={`text-${theme.textSecondary} font-medium mb-3`}>Recent Achievements:</h4>\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3\">\r\n                {achievements.recent.map((achievement, index) => (\r\n                  <div \r\n                    key={index}\r\n                    className={`bg-gradient-to-br ${getAchievementColor(achievement.color)} p-3 rounded-lg border border-white/20 text-center transition-all duration-300 hover:scale-105 hover:shadow-lg`}\r\n                  >\r\n                    <div className=\"text-2xl mb-1\">\r\n                      {achievement.icon || '🏆'}\r\n                    </div>\r\n                    <div className=\"text-white font-bold text-sm mb-1\">\r\n                      {achievement.name}\r\n                    </div>\r\n                    <div className=\"text-white/80 text-xs mb-2\">\r\n                      {achievement.description}\r\n                    </div>\r\n                    <div className=\"text-yellow-300 font-bold text-xs\">\r\n                      +{achievement.points} pts\r\n                    </div>\r\n                    <div className=\"text-white/60 text-xs mt-1\">\r\n                      {formatDate(achievement.earned_at)}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {achievements.recent && achievements.recent.length === 0 && (\r\n            <div className={`text-center py-8 text-${theme.textMuted}`}>\r\n              <div className=\"text-4xl mb-2\">🎯</div>\r\n              <p>No achievements yet!</p>\r\n              <p className=\"text-sm mt-1\">Start playing to unlock your first achievement.</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Theme Selector Section */}\r\n        <div className=\"mb-6\">\r\n          <ThemeSelector />\r\n        </div>\r\n\r\n        {/* Edit Profile Form */}\r\n        <div className={`bg-${theme.surface} rounded-lg p-6 border border-${theme.surfaceBorder} transition-all duration-300`}>\r\n          <h3 className={`text-xl font-semibold text-${theme.text} mb-4`}>Edit Profile</h3>\r\n          \r\n          <form onSubmit={handleUpdateProfile} className=\"space-y-4\">\r\n            {errors.submit && (\r\n              <div className=\"bg-red-600/20 border border-red-500/50 rounded p-3 animate-slide-in\">\r\n                <p className=\"text-red-300 text-sm\">{errors.submit}</p>\r\n              </div>\r\n            )}\r\n\r\n            <div>\r\n              <div className=\"flex justify-between items-center mb-1\">\r\n                <label htmlFor=\"username\" className={`block text-${theme.textSecondary} text-sm font-medium`}>\r\n                  Username\r\n                </label>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    if (!showUsernameHistory) {\r\n                      fetchUsernameHistory();\r\n                    }\r\n                    setShowUsernameHistory(!showUsernameHistory);\r\n                  }}\r\n                  className={`text-${theme.primary} hover:text-${theme.primaryHover} text-xs underline transition-colors duration-200`}\r\n                >\r\n                  {showUsernameHistory ? 'Hide History' : 'View History'}\r\n                </button>\r\n              </div>\r\n              <input\r\n                type=\"text\"\r\n                id=\"username\"\r\n                name=\"username\"\r\n                value={formData.username}\r\n                onChange={handleInputChange}\r\n                className={`w-full px-3 py-2 bg-gray-800 border rounded-md text-white focus:outline-none focus:ring-2 transition-all duration-200 ${\r\n                  errors.username \r\n                    ? 'border-red-500 focus:ring-red-500' \r\n                    : `border-gray-600 focus:ring-${theme.ring} focus:border-${theme.primary}`\r\n                }`}\r\n                placeholder=\"Your username\"\r\n              />\r\n              {errors.username && (\r\n                <p className=\"text-red-400 text-xs mt-1 animate-slide-in\">{errors.username}</p>\r\n              )}\r\n              \r\n              {showUsernameHistory && (\r\n                <div className={`mt-3 p-3 bg-${theme.surfaceBorder}/10 border border-${theme.surfaceBorder} rounded-md`}>\r\n                  <h4 className={`text-${theme.textSecondary} text-sm font-medium mb-2`}>Username History</h4>\r\n                  {historyLoading ? (\r\n                    <div className=\"flex items-center justify-center py-2\">\r\n                      <div className={`w-4 h-4 border-2 border-${theme.primary} border-t-transparent rounded-full animate-spin mr-2`}></div>\r\n                      <span className={`text-${theme.textMuted} text-xs`}>Loading...</span>\r\n                    </div>\r\n                  ) : usernameHistory.length > 0 ? (\r\n                    <div className=\"space-y-2 max-h-32 overflow-y-auto\">\r\n                      {usernameHistory.map((entry, index) => (\r\n                        <div key={index} className={`text-xs text-${theme.textMuted} flex justify-between items-center py-1`}>\r\n                          <span>\r\n                            <span className=\"font-mono\">{entry.old_username}</span>\r\n                            <span className=\"mx-2\">→</span>\r\n                            <span className=\"font-mono\">{entry.new_username}</span>\r\n                          </span>\r\n                          <span className=\"text-xs opacity-75\">\r\n                            {new Date(entry.changed_at).toLocaleDateString()}\r\n                          </span>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  ) : (\r\n                    <p className={`text-${theme.textMuted} text-xs`}>No username changes found.</p>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className={`w-full py-2 px-4 rounded-md font-medium transition-all duration-200 hover:scale-105 ${\r\n                loading\r\n                  ? 'bg-gray-600 text-gray-300 cursor-not-allowed'\r\n                  : `bg-${theme.primary} hover:bg-${theme.primaryHover} text-white hover:${theme.glow}`\r\n              }`}\r\n            >\r\n              {loading ? (\r\n                <span className=\"flex items-center justify-center\">\r\n                  <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"></div>\r\n                  Updating...\r\n                </span>\r\n              ) : 'Update Profile'}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}